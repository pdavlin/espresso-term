@font-face {
  font-family: 'BerkeleyMono';
  src: url('/fonts/BerkeleyMono-Regular.woff') format('woff');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

:root {
  /* Base16 palette */
  --base_00: #1b1818;
  --base_01: #292424;
  --base_02: #585050;
  --base_03: #655d5d;
  --base_04: #7e7777;
  --base_05: #8a8585;
  --base_06: #e7dfdf;
  --base_07: #f4ecec;
  --base_08: #ca4949;
  --base_09: #b45a3c;
  --base_0a: #a06e3b;
  --base_0b: #4b8b8b;
  --base_0c: #5485b6;
  --base_0d: #7272ca;
  --base_0e: #8464c4;
  --base_0f: #bd5187;

  /* Semantic color tokens */
  --color-bg: var(--base_00);
  --color-surface: var(--base_01);
  --color-surface-alt: var(--base_02);
  --color-border: var(--base_03);
  --color-text: var(--base_07);
  --color-text-secondary: var(--base_05);
  --color-accent: var(--base_0b);
  --color-accent-dim: color-mix(in srgb, var(--base_0b) 60%, var(--base_00));
  --color-success: var(--base_0b);
  --color-warning: var(--base_09);
  --color-error: var(--base_08);

  --font-mono: 'BerkeleyMono', 'SF Mono', 'Menlo', 'Consolas', monospace;

  --radius-sm: 0px;
  --radius-md: 2px;
  --radius-lg: 2px;

  --space-xs: 4px;
  --space-sm: 8px;
  --space-md: 16px;
  --space-lg: 24px;
  --space-xl: 32px;

  --nav-height: 56px;
  --status-height: 32px;

  --_focus-ring-distance: 2px;
  --_focus-ring-color-background: var(--color-bg);
}

*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html, body {
  height: 100%;
  font-family: var(--font-mono);
  background: var(--color-bg);
  color: var(--color-text);
  -webkit-font-smoothing: antialiased;
  -webkit-tap-highlight-color: transparent;
  overscroll-behavior: none;
}

body {
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
}

:focus-visible {
  --_focus-ring-color-inner: hsl(0 0% 100%);
  --_focus-ring-color-outer: hsl(0 0% 0%);
  box-shadow:
    0 0 0 var(--_focus-ring-distance) var(--_focus-ring-color-background),
    0 0 0 calc(var(--_focus-ring-distance) * 2) var(--_focus-ring-color-inner),
    0 0 0 calc(var(--_focus-ring-distance) * 3) var(--_focus-ring-color-background),
    0 0 0 calc(var(--_focus-ring-distance) * 4) var(--_focus-ring-color-outer);
  outline: none;
}

@supports (color: hsl(from hsl(0 0% 100%) h s l)) {
  :focus-visible {
    --_focus-ring-color-inner: currentColor;
    --_focus-ring-color-outer: hsl(from var(--_focus-ring-color-inner) calc(h + 180) s l);
  }
}

@media (forced-colors: active) {
  :focus-visible {
    outline: 2px solid LinkText;
    outline-offset: 2px;
    box-shadow: none;
  }
}

fieldset {
  border: 1px solid var(--color-border);
  padding: 0.75rem 1rem;
  margin: 1rem 0;
  transition: border-color 0.15s ease-out;
}

fieldset:hover,
fieldset:focus-within {
  border-color: var(--color-accent);
}

fieldset legend {
  padding: 0 0.5em;
  color: var(--base_04);
  font-weight: bold;
  font-size: 0.75rem;
  text-transform: lowercase;
  transition: color 0.15s ease-out;
}

fieldset:hover legend,
fieldset:focus-within legend {
  color: var(--color-accent);
}

@media (hover: none) and (pointer: coarse) {
  fieldset:hover,
  fieldset:hover legend {
    border-color: var(--color-border);
    color: var(--base_04);
  }

  fieldset:active {
    border-color: var(--color-accent);
  }

  fieldset:active legend {
    color: var(--color-accent);
  }
}
